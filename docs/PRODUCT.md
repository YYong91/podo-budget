# HomeNRich 프로덕트 정의서 (Source of Truth)

**최종 업데이트**: 2026-02-13
**버전**: 1.0

이 문서는 HomeNRich 프로젝트의 **진실의 원천(Source of Truth)**입니다.
기획 변경 시 가장 먼저 이 문서를 업데이트하고, 다른 문서들은 이를 참조합니다.

---

## 핵심 가치 제안

HomeNRich는 **"채팅하듯 말하면 알아서 정리되는 AI 공유 가계부"**입니다.

### 해결하는 문제
- 기존 가계부 앱: 입력 단계가 많고 지속하기 어려움
- 부부/커플 공유: 기존 앱은 실시간 공유가 불편하고 정산이 복잡함
- 엑셀 정리: 시간이 많이 걸리고 실시간 동기화 안 됨

### 핵심 차별점
1. **자연어 입력**: "오늘 점심에 김치찌개 8000원" -> AI가 자동 분류 및 저장
2. **공유 가계부**: 가족/커플과 실시간 지출 공유
3. **봇 연동**: Telegram/KakaoTalk 봇으로 앱 없이 입력 가능
4. **프라이버시**: 사용자 자신의 LLM API 키 사용 (데이터 제어)

---

## 타겟 사용자

### Primary Persona
- **공유형 부부/커플** (25-40세)
- 맞벌이 가구, 결혼 예정/신혼
- 페인 포인트: 지출 추적 어려움, 배우자와 정산 불편

### Secondary Persona
- 룸메이트/셰어하우스 (생필품 공동 구매 정산)
- 1인 가구 (간편 가계부)

---

## 핵심 사용자 여정

### 공유 가계부 플로우: "개인으로 시작 -> 필요 시 공유로 확장"

```
[신규 가입] -> [개인 가계부 즉시 사용 가능]
                      |
                 공유 필요?
                 /        \
              No            Yes
              |               |
    [계속 개인 사용]    [가구 생성 (오너)]
                              |
                     [파트너 이메일로 초대]
                              |
                     [파트너 가입 & 수락]
                              |
                     [공유 가계부 활성화]
```

### 핵심 UX 결정
- **가입 시 가구 생성 강제하지 않음** - 개인 모드로 바로 사용 가능
- **가구에 속한 경우 기본값 "공유 지출"** - 커플/부부는 대부분 공유 지출이 메인
- **키워드 기반 자동 분류** - "우리" -> 공유, "내" -> 개인
- **대시보드 통합 뷰** - 공유 가계부 위에 표시, 개인은 접기 가능

---

## Phase 정의

### Phase 1: Core MVP (개인 가계부)
**목표**: 1인 사용자가 자연어로 지출을 입력하고 자동 분류되는 기능

핵심 기능:
- LLM 자연어 파싱 구현 (OpenAI/Anthropic)
- 프롬프트 엔지니어링 (금액, 날짜, 카테고리 추출)
- Alembic DB 마이그레이션 초기화
- 프론트엔드 자연어 입력 UI (채팅 인터페이스)

### Phase 2: Household Sharing (공유 가계부)
**목표**: 2명 이상이 같은 가구에서 지출을 실시간 공유

핵심 기능:
- Household <-> Expense 연결 로직 (현재 미연결 상태)
- 권한 검증 (owner/member 역할별)
- 초대 시스템 완성 (이메일 발송)
- Household 전환 UI

### Phase 3: Bot Integration (메신저 봇)
**목표**: Telegram/KakaoTalk 봇으로 지출 입력 가능

핵심 기능:
- Telegram Bot 완성 (Webhook + 자연어 입력)
- Kakao OpenBuilder 연동

### Phase 4: 배포 및 Beta
**목표**: Fly.io 배포 + 베타 테스터 10쌍 (20명) 모집

---

## 아키텍처 개요

```
[사용자]
   |
[Frontend: React 19] -> [Backend: FastAPI] -> [PostgreSQL]
                              |
                        [LLM API: OpenAI/Anthropic]
                              |
                        [Telegram/Kakao Bots]
```

---

## 성공 지표

### MVP (Phase 1 완료 시)
- LLM 파싱 정확도 > 80%
- 지출 입력 소요 시간 < 10초

### Beta (Phase 2 완료 시)
- 베타 테스터 10쌍 (20명) 참여
- 공유 가계부 사용률 > 70%

### 런칭 (Phase 3 완료 시)
- 첫 달 가입자 > 100명
- 월 비용 < $10 (Fly.io 무료 티어 + LLM)

---

## 의사결정 기록

### D1: 왜 공유 가계부인가?
- **결정**: 커플/부부 공유 가계부를 Primary 유스케이스로 설정
- **이유**: 개인 가계부 앱은 포화 (토스, 뱅크샐러드 등), 공유는 차별화 + Lock-in 효과
- **Trade-off**: 1인 사용자도 배제하지 않음 (개인 지출 모드 지원)

### D2: 기본값 "공유 지출" vs "개인 지출"
- **결정**: 가구에 속한 경우 기본값 "공유 지출"
- **이유**: 커플/부부는 대부분의 지출을 공유 (마트, 식비 등). 개인 지출은 키워드("내")로 구분
- **변경 가능**: v1.0에서 "기본 입력 모드" 설정 추가 예정

### D3: 대시보드 통합 뷰 vs 탭 분리
- **결정**: 통합 뷰 (공유 우선 + 개인 접기 가능)
- **이유**: 한 화면에서 모든 정보 파악 가능, 커플/부부에게 공유 지출이 더 중요

---

## 리스크

| 리스크 | 영향 | 대응 방안 |
|--------|------|----------|
| LLM 파싱 정확도 낮음 | 사용자 신뢰도 하락 | 프롬프트 튜닝 + 사용자 피드백 학습 |
| LLM API 비용 폭증 | 운영 비용 증가 | 캐싱 + Rate limiting + 사용자 API 키 |
| Household 권한 관리 복잡도 | 개발 지연 | RBAC 단순화 (owner/member만) |
| Kakao 봇 승인 지연 | 출시 지연 | Telegram 먼저 오픈 |

---

## 참조 문서

- **구현 계획**: `ROADMAP.md`
- **구현 현황**: `IMPLEMENTATION_STATUS.md`
- **개발 가이드**: `CLAUDE.md`
- **기능 상세**: `docs/features/`
- **운영 가이드**: `docs/operations/`
